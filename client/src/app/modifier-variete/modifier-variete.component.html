<div *ngIf="modifierSuccess" class="alert alert-success" role="alert">
  La variété {{ variete.nom }} a été modifié avec succés
</div>
<div *ngIf="modifierSuccess">
  <button type="button" class="btn" routerLink="/hotels">
    Nos Jardins&#10140;
  </button>
  <button type="button" class="btn" routerLink="/varietes">
    Nos Varietés&#10140;
  </button>
  <button type="button" class="btn" routerLink="/plantes">
    Rechercher une de nos plantes&#10140;
  </button>
</div>
<form *ngIf="!modifierSuccess">
  <div class="container rounded bg-white mt-5 mb-5">
    <div class="row">
      <div class="col-md-2 border-right">
        <div class="d-flex flex-column align-items-center text-center p-3 py-5">
          <span class="font-weight-bold">{{ variete.nom }}</span
          ><img
            class="rounded-circle mt-3"
            width="150px"
            src="https://jardinducoin.com/wp-content/uploads/2020/04/jardinducoin-jardinage-300x300.jpg"
          />
        </div>
      </div>

      <div class="col-md-5 border-right">
        <div class="p-3 py-5">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="text-right">Modification de la variété</h4>
          </div>
          <div class="row mt-3">
            <div class="col-md-12">
              <label class="labels">Nom du semencier</label>
              <div
                (blur)="variete.semencier.nom = semencier.innerText"
                class="sentence form-control"
                contenteditable="true"
                #semencier
              >
                {{ variete.semencier.nom }}
              </div>
              <label *ngIf="missingAtt.includes('nomSemencier')" class="error">Cette case ne peut pas être vide</label>
            </div>

            <div class="col-md-12">
              <label class="labels">Site web du semencier</label>
              <div
                (blur)="variete.semencier.siteWeb = siteweb.innerText"
                class="sentence form-control"
                contenteditable="true"
                #siteweb
              >
                {{ variete.semencier.siteWeb }}
              </div>
              <label *ngIf="missingAtt.includes('siteWeb')" class="error">Cette case ne peut pas être vide</label>
            </div>
            <div class="col-md-12">
              <label class="labels">Nom de la variété</label>
              <div
                (blur)="variete.nom = nomvar.innerText"
                class="sentence form-control"
                contenteditable="true"
                #nomvar
              >
                {{ variete.nom }}
              </div>
              <label *ngIf="missingAtt.includes('nom')" class="error">Cette case ne peut pas être vide</label>
            </div>

            <div class="col-md-12">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  [checked]="variete.estBiologique"
                  (change)="variete.estBiologique = !variete.estBiologique"
                  id="flexCheckChecked"
                />
                <label class="form-check-label" for="flexCheckChecked">
                  Biologique
                </label>
              </div>
            </div>
            <div class="col-md-12">
              <label class="labels">Semis de la variété</label>
              <div
                (blur)="variete.semis = semis.innerText"
                class="sentence form-control"
                contenteditable="true"
                #semis
              >
                {{ variete.semis }}
              </div>
              <label *ngIf="missingAtt.includes('semis')" class="error">Cette case ne peut pas être vide</label>
            </div>

            <div class="col-md-12">
              <label for="miseEnMarche" class="col-form-label"
                >Année de mise en marché</label
              >
              <input
                id="miseEnMarche"
                name="miseEnMarche"
                [(ngModel)]="variete.anneeMiseEnMarche"
                class="custom-select"
                type="date"
              />
              <label *ngIf="missingAtt.includes('anneeMiseEnMarche')" class="error">Cette case ne peut pas être vide</label>
            </div>

            <div class="col-md-12">
              <label class="labels">Récolte</label>
              <div
                class="form-control sentence"
                (blur)="variete.recolte = recolte.innerText"
                contenteditable="true"
                #recolte
              >
                {{ variete.recolte }}
              </div>
              <label *ngIf="missingAtt.includes('recolte')" class="error">Cette case ne peut pas être vide</label>
            </div>

            <div class="col-md-6">
              <label for="miseEnPlace" class="col-form-label"
                >Période de mise en place</label
              >
              <input
                id="miseEnPlace"
                name="miseEnPlace"
                [(ngModel)]="variete.periodeMiseEnPlace"
                class="custom-select"
                type="date"
              />
              <label *ngIf="missingAtt.includes('periodeMiseEnPlace')" class="error">Cette case ne peut pas être vide</label>
            </div>

            <div class="col-md-6">
              <label for="periodeRecolte" class="col-form-label"
                >Période de récolte</label
              >
              <input
                id="periodeRecolte"
                name="periodeRecolte"
                [(ngModel)]="variete.periodeRecolte"
                class="custom-select"
                type="date"
              />
              <label *ngIf="missingAtt.includes('periodeRecolte')" class="error">Cette case ne peut pas être vide</label>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-5">
        <div class="p-3 py-5 second-column">
          <div class="col-md-12">
            <label class="labels">Type de Sols: </label
            ><strong>{{ solsAdaptes }}</strong>
            <select
              class="custom-select multiple-choices"
              name="sols"
              [(ngModel)]="solsAdaptes"
              multiple
            >
              <option *ngFor="let sol of solsType">
                {{ sol.type }}
              </option>
            </select>
            <p>
              Maintenez enfoncé le bouton "Ctrl" (Windows) ou "Command" (Mac) pour sélectionner plusieurs options.
            </p>
          </div>

          <div class="col-md-12">
            <label class="labels">Entretien</label>
            <div
              class="form-control sentence"
              (blur)="variete.entretien = entretien.innerText"
              contenteditable="true"
              #entretien
            >
              {{ variete.entretien }}
            </div>
            <label *ngIf="missingAtt.includes('entretien')" class="error">Cette case ne peut pas être vide</label>
          </div>
          <br />

          <div class="col-md-12">
            <label class="labels">Plantation</label>
            <div
              class="form-control sentence"
              (blur)="variete.plantation = plantation.innerText"
              contenteditable="true"
              #plantation
            >
              {{ variete.plantation }}
            </div>
            <label *ngIf="missingAtt.includes('plantation')" class="error">Cette case ne peut pas être vide</label>
          </div>
          <br />

          <div class="col-md-12">
            <label class="labels">Commentaire générale</label
            ><textarea
              class="form-control error"
              name="commentaire"
              [(ngModel)]="variete.commentaireGeneral"
              cols="30"
              rows="4"
              >{{ variete.commentaireGeneral }}</textarea
            >
            <label *ngIf="missingAtt.includes('commentaireGeneral')" class="error">Cette case ne peut pas être vide</label>
          </div>

          <div class="mt-5 text-center">
            <button class="btn btn-primary profile-button" (click)="onSubmit()">
              Sauvegarder les changements
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
